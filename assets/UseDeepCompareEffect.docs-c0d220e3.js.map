{"version":3,"file":"UseDeepCompareEffect.docs-c0d220e3.js","sources":["../../../too-many-hooks/dist/useDeepCompareEffect.d.ts?raw","../../../too-many-hooks/src/useThrottleFunction.ts?raw","../../src/stories/UseDeepCompareEffect.docs.mdx"],"sourcesContent":["export default \"import React from 'react';\\n/**\\n * `useDeepCompareEffect` hook type\\n *\\n * @export\\n * @typedef {UseDeepCompareEffect}\\n * @param {React.EffectCallback} effect\\n * @param {?React.DependencyList} [deps]\\n */\\nexport type UseDeepCompareEffect = (effect: React.EffectCallback, deps?: React.DependencyList) => void;\\n/**\\n * Whenever dependencies are no longer deeply equal, calls an `effect` function that contains imperative, possibly effectful code\\n *\\n * @implements {UseDeepCompareEffect}\\n * @param {React.EffectCallback} effect\\n * @param {?React.DependencyList} [deps]\\n * @returns {*}\\n */\\ndeclare const useDeepCompareEffect: UseDeepCompareEffect;\\nexport default useDeepCompareEffect;\\n\"","export default \"import { useRef, useState } from 'react'\\nimport useDeepCompareEffect from './useDeepCompareEffect'\\n\\n/**\\n * `useThrottleFunction` hook type\\n *\\n * @export\\n * @template A extends unknown[]\\n * @template R\\n * @param {(...args: A) => R} func\\n * @param {number} delay\\n * @param {A} args\\n * @returns {R | null}\\n * @typedef {UseThrottleFunction}\\n */\\nexport type UseThrottleFunction = <A extends unknown[], R>(\\n  func: (...args: A) => R,\\n  delay: number,\\n  ...args: A\\n) => R | null\\n\\n/**\\n * Ensures a function is called whenever its args change, at most once every `delay`ms. Immediately calls then function then re-calls\\n * the function and updates the result whenever the args change, at most once every `delay`ms.\\n *\\n * @template A extends unknown[]\\n * @template R\\n * @param {(...args: A) => R} func\\n * @param {number} delay\\n * @param {A} args\\n * @returns {R | null}\\n */\\nconst useThrottleFunction: UseThrottleFunction = <A extends unknown[], R>(\\n  func: (...args: A) => R,\\n  delay: number,\\n  ...args: A\\n): R | null => {\\n  const [returnValue, setReturnValue] = useState<R | null>(null)\\n  const timeout = useRef<NodeJS.Timeout | null>(null)\\n  const newArgs = useRef<A | null>(null)\\n\\n  useDeepCompareEffect(() => {\\n    if (!timeout.current) {\\n      setReturnValue(func(...args))\\n      const onTimeout = () => {\\n        if (newArgs.current) {\\n          setReturnValue(func(...newArgs.current))\\n          newArgs.current = null\\n          timeout.current = setTimeout(onTimeout, delay)\\n        } else {\\n          timeout.current = null\\n        }\\n      }\\n      timeout.current = setTimeout(onTimeout, delay)\\n    } else {\\n      newArgs.current = args\\n    }\\n    // Only call the update callback when args change\\n    // eslint-disable-next-line react-hooks/exhaustive-deps\\n  }, args)\\n\\n  return returnValue\\n}\\n\\nexport default useThrottleFunction\\n\"","import { Meta, Source } from '@storybook/addon-docs'\nimport TYPES from '../../../too-many-hooks/dist/useDeepCompareEffect.d.ts?raw'\nimport USE_THROTTLE_FUNCTION_CODE from '../../../too-many-hooks/src/useThrottleFunction.ts?raw'\n\n<Meta title=\"Example/UseDeepCompareEffect\" />\n\n# useDeepCompareEffect\n\nRuns an `effect` function when dependencies change, deeply compared\n\n## Types\n\n<Source language=\"ts\" code={TYPES} />\n\n## Examples\n\n`useDeepCompareEffect` is not often used directly in the UI so it does not have a dedicated story at this time (ideas welcome).\nHowever, it is useful in cases such as the `useThrottleFunction` hook and in other hooks still to come for reacting to changes to objects, arrays, etc.\n\n### `useThrottleFunction`\n\nIn this case, `useDeepCompareEffect` is used to deeply check if arguments to a function have changed and if so, update the current state of the throttled value.\nA normal `useEffect` may fire too often because the arguments may be reassigned on every render, but we only want to run the function when their actual values change.\n\n<Source language=\"ts\" code={USE_THROTTLE_FUNCTION_CODE} />\n"],"names":["TYPES","USE_THROTTLE_FUNCTION_CODE","_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","Source","MDXContent","MDXLayout"],"mappings":"mWAAA,MAAAA,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECAfC,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECMf,SAASC,EAAkBC,EAAO,CAChC,MAAMC,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,EAAG,IACH,KAAM,OACN,GAAI,KACJ,GAAI,IACL,EAAEC,EAAoB,EAAEF,EAAM,UAAU,EACzC,OAAOG,EAAAA,KAAMC,EAAAA,SAAW,CACtB,SAAU,CAACC,EAAI,IAACC,EAAM,CACpB,MAAO,8BACR,CAAA,EAAG;AAAA,EAAMD,MAAKJ,EAAY,GAAI,CAC7B,GAAI,uBACJ,SAAU,sBACX,CAAA,EAAG;AAAA,EAAME,OAAMF,EAAY,EAAG,CAC7B,SAAU,CAAC,WAAYI,MAAKJ,EAAY,KAAM,CAC5C,SAAU,QACX,CAAA,EAAG,qDAAqD,CAC1D,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,QACJ,SAAU,OAChB,CAAK,EAAG;AAAA,EAAMI,EAAI,IAACE,EAAQ,CACrB,SAAU,KACV,KAAMV,CACP,CAAA,EAAG;AAAA,EAAMQ,MAAKJ,EAAY,GAAI,CAC7B,GAAI,WACJ,SAAU,UACX,CAAA,EAAG;AAAA,EAAME,OAAMF,EAAY,EAAG,CAC7B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,sBACX,CAAA,EAAG;AAAA,6CAA0JI,MAAKJ,EAAY,KAAM,CACnL,SAAU,qBACX,CAAA,EAAG,yFAAyF,CAC9F,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,sBACJ,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,SAAU,qBAClB,CAAO,CACF,CAAA,EAAG;AAAA,EAAME,OAAMF,EAAY,EAAG,CAC7B,SAAU,CAAC,iBAAkBI,MAAKJ,EAAY,KAAM,CAClD,SAAU,sBACX,CAAA,EAAG;AAAA,WAA2II,MAAKJ,EAAY,KAAM,CACpK,SAAU,WACX,CAAA,EAAG,oJAAoJ,CAC9J,CAAK,EAAG;AAAA,EAAMI,EAAI,IAACE,EAAQ,CACrB,SAAU,KACV,KAAMT,CACZ,CAAK,CAAC,CACN,CAAG,CACH,CACA,SAASU,EAAWR,EAAQ,GAAI,CAC9B,KAAM,CAAC,QAASS,CAAS,EAAI,OAAO,OAAO,CAAE,EAAEP,EAAoB,EAAEF,EAAM,UAAU,EACrF,OAAOS,EAAYJ,EAAAA,IAAKI,EAAW,OAAO,OAAO,CAAE,EAAET,EAAO,CAC1D,SAAUK,EAAAA,IAAKN,EAAmBC,CAAK,CAC3C,CAAG,CAAC,EAAID,EAAkBC,CAAK,CAC/B"}